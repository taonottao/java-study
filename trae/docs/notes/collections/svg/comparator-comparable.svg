<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="920" height="380" viewBox="0 0 920 380" role="img" aria-label="Comparable vs Comparator and TreeSet dedup">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,3 L0,6 Z" fill="#555" />
    </marker>
    <style>
      .box{fill:#f7fafc;stroke:#2b6cb0;stroke-width:1.5;rx:6;ry:6}
      .title{font:600 14px Segoe UI,Arial; fill:#2b6cb0}
      .text{font:12px Segoe UI,Arial; fill:#2d3748}
      .note{font:12px Segoe UI,Arial; fill:#718096}
      .cmp{fill:#e6fffa;stroke:#2c7a7b;stroke-width:1.5;rx:6;ry:6}
      .nat{fill:#e9d8fd;stroke:#6b46c1;stroke-width:1.5;rx:6;ry:6}
      .ts{fill:#c6f6d5;stroke:#2f855a;stroke-width:1.5;rx:6;ry:6}
    </style>
  </defs>

  <text x="20" y="28" class="title">Comparable vs Comparator 与 TreeSet 去重语义</text>

  <!-- Comparable 自然顺序 -->
  <rect x="20" y="50" width="260" height="110" class="nat"/>
  <text x="30" y="75" class="title" fill="#553c9a">Comparable</text>
  <text x="30" y="98" class="text">对象内部定义 compareTo</text>
  <text x="30" y="118" class="note">自然顺序：稳定、类内固定</text>

  <!-- Comparator 外部比较器 -->
  <rect x="320" y="50" width="260" height="130" class="cmp"/>
  <text x="330" y="75" class="title" fill="#285e61">Comparator</text>
  <text x="330" y="98" class="text">comparing + thenComparing</text>
  <text x="330" y="118" class="text">nullsFirst/nullsLast</text>
  <text x="330" y="138" class="text">reversed()</text>

  <line x1="280" y1="105" x2="320" y2="105" stroke="#4a5568" marker-end="url(#arrow)"/>

  <!-- TreeSet 去重语义 -->
  <rect x="620" y="40" width="280" height="150" class="ts"/>
  <text x="630" y="65" class="title" fill="#276749">TreeSet 去重</text>
  <text x="630" y="90" class="text">相等定义：compare(a,b) == 0</text>
  <text x="630" y="110" class="note">非 equals/hashCode 语义</text>
  <text x="630" y="135" class="text">示例：按字符串长度比较 → 长度相同视为重复</text>

  <line x1="580" y1="110" x2="620" y2="110" stroke="#2f855a" marker-end="url(#arrow)"/>

  <!-- 一致性建议 -->
  <rect x="20" y="220" width="880" height="120" class="box"/>
  <text x="30" y="245" class="title">一致性与设计建议</text>
  <text x="30" y="270" class="text">1) 比较器需满足自反性、对称性、传递性</text>
  <text x="30" y="290" class="text">2) 可变字段不宜作为排序关键，防止插入后修改破坏有序</text>
  <text x="30" y="310" class="text">3) 用于 TreeSet/TreeMap 时，尽量让 equals/hashCode 与 compareTo 的“相等”一致</text>
</svg>